@using System.Linq
@using Microsoft.AspNetCore.Identity
@inject SignInManager<IdentityUser> SignInManager
@inject UserManager<IdentityUser> UserManager

@if (SignInManager.IsSignedIn(User))
{
    var userName = User.Identity?.Name ?? "Account";
    var initials = string.Join(string.Empty, userName
        .Split(' ', System.StringSplitOptions.RemoveEmptyEntries)
        .Select(part => char.ToUpperInvariant(part[0])));
    <div class="app-user-menu">
        <span class="app-user-avatar">@initials</span>
        <div class="app-user-meta">
            <span class="app-user-name">@userName</span>
            <div class="app-user-links">
                <a class="app-user-link" asp-area="Identity" asp-page="/Account/Manage/Index">Manage</a>
                <a class="app-user-link" asp-area="Identity" asp-page="/Account/Register">Register</a>
            </div>
        </div>
        <form asp-area="Identity" asp-page="/Account/Logout" asp-route-returnUrl="/Identity/Account/Login" method="post">
            <button type="submit" class="btn btn-outline-secondary btn-sm">Logout</button>
        </form>
    </div>
}
else
{
    <a class="btn btn-primary" asp-area="Identity" asp-page="/Account/Login">
        <i class="bi bi-box-arrow-in-right me-1"></i>
        Login
    </a>
}